Техническое задание на проект: SpotifyStat

1. Цель проекта

Music Insights — это веб-сервис персональной музыкальной аналитики, работающий на основе данных Spotify.
Проект решает задачу анализа и визуализации музыкальных предпочтений пользователя: сервис позволяет авторизоваться через Spotify, получить данные о наиболее прослушиваемых треках и артистах за разные периоды времени, сохранить аналитические «снимки» в базе данных и наглядно отобразить статистику в виде таблиц и графиков.

Основная ценность сервиса — возможность анализировать музыкальные предпочтения пользователя и их изменения со временем, а не просто отображать данные внешнего API.

2. Роли пользователей
Гость

Может просматривать главную страницу проекта.

Видит описание сервиса и примеры аналитики (демо-данные).

Не имеет доступа к персональной статистике.

Авторизованный пользователь

Авторизуется через Spotify (OAuth 2.0).

Получает персональную музыкальную аналитику.

Может:

просматривать топ-треки и топ-артистов за разные периоды;

сохранять аналитические снимки в базу данных;

просматривать графики и агрегированную статистику;

сравнивать данные за разные периоды.

Администратор

Управляет пользователями и данными через Django Admin.

Может просматривать и редактировать все сущности проекта.

3. Модели данных (сущности)
UserProfile (Профиль пользователя)

Расширение стандартной модели Django User для хранения данных, связанных со Spotify.

Поля:

user (OneToOneField → User)

spotify_id

created_at



Artist (Артист)

Сущность, представляющая музыкального исполнителя.

Поля:

spotify_id

name

genres (JSONField / TextField)

popularity



Track (Трек)

Музыкальный трек с базовыми характеристиками.

Поля:

spotify_id

name

artist (ForeignKey → Artist)

popularity

energy

danceability

tempo



ListeningSnapshot (Аналитический снимок)

Сохранённый результат анализа музыкальных предпочтений пользователя за выбранный период.

Поля:

user (ForeignKey → User)

period (short_term / medium_term / long_term)

created_at



SnapshotTrack (Треки в снимке)

Связующая модель между ListeningSnapshot и Track с указанием позиции в рейтинге.

Поля:

snapshot (ForeignKey → ListeningSnapshot)

track (ForeignKey → Track)

position

4. Ключевой функционал (User Stories)

Авторизация через Spotify
Пользователь нажимает кнопку «Войти через Spotify», проходит OAuth-авторизацию и получает доступ к персональной аналитике.

Просмотр музыкальной статистики
Пользователь выбирает период (последние 4 недели, 6 месяцев или всё время) и получает:

топ-треков;

топ-артистов;

распределение жанров.

Сохранение аналитического снимка
Пользователь может сохранить текущую аналитику в базу данных для последующего анализа и сравнения.

Агрегированная аналитика
Система рассчитывает средние значения audio-характеристик (energy, tempo, danceability) и формирует «музыкальный профиль» пользователя.

Визуализация данных
Статистика отображается в виде таблиц и интерактивных графиков (диаграммы жанров, аудио-параметров).

5. Внешние интеграции и аналитика
Внешние API

Spotify Web API

получение данных о треках, артистах и жанрах;

получение audio-характеристик треков;

OAuth 2.0 для авторизации пользователей.



Аналитика и визуализация

Django ORM:

фильтрация;

сортировка;

агрегации (Count, Avg).

Библиотеки визуализации:

Chart.js (для интерактивных графиков).

6. Изменения в ходе реализации

В процессе разработки возможны незначительные изменения структуры моделей или пользовательских сценариев.
Все существенные отклонения от текущего технического задания будут зафиксированы и описаны в данном разделе.
